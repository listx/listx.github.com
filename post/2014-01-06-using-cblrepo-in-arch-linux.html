<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Linus's Blog - Using cblrepo in Arch Linux</title>
		<link rel="stylesheet" href="../css/base.css">
		<link rel="stylesheet" href="../css/syntax.css">
		<link href="https://fonts.googleapis.com/css?family=Merriweather:300,300italic,700italic,700" rel="stylesheet" type="text/css">
		<link rel="shortcut icon" type="image/png" href="../favicon.png">
		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="../misc.js"></script>
		<!-- https://github.com/mreid/markreidname-hakyll/blob/master/_templates/mathjax.html -->
<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
		extensions: ["tex2jax.js"],
		jax: ["input/TeX", "output/HTML-CSS"],
		tex2jax: {
			inlineMath: [ ["\\(","\\)"] ],
			displayMath: [ ["\\[","\\]"] ],
			processEscapes: true
		},
		TeX: { equationNumbers: { autoNumber: "AMS" } },
		"HTML-CSS": { availableFonts: ["TeX"] }
	});
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script>

	</head>
	<body>
		<div id="header">
			<a href="../">Blog</a>
			&bull;
			<a href="../about.html">About</a>
			&bull;
			<a href="../code.html">Code</a>
			&bull;
			<a href="../papers.html">Papers</a>
		</div>

		<div id="content">
			<h1 class="center" id="page-title">Using cblrepo in Arch Linux</h1>

			<div class="info center">
	<code class="date">2014-01-06</code><a class="history" href="https://github.com/listx/listx_blog/commits/master/post/2014-01-06-using-cblrepo-in-arch-linux.md" title="History">*</a>
	<br>
	<a href="../tag/arch.html">arch</a>, <a href="../tag/linux.html">linux</a>, <a href="../tag/haskell.html">haskell</a>, <a href="../tag/cblrepo.html">cblrepo</a>
</div>

<p>UPDATE 2014-01-24: See <a href="2014-01-24-cabal2pkgbuild.html">this post</a>.</p>
<p>The <a href="https://github.com/magthe/cblrepo">cblrepo</a> command line utility helps to maintain a set of Haskell packages, and is used as the de facto Hackage package manager in Arch Linux.</p>
<p>At least in Arch Linux, the idea is to first install the base set of available Haskell packages from the <a href="https://wiki.archlinux.org/index.php/Haskell_Package_Guidelines">[haskell-core]</a> repo. If you now want to install a package from http://hackage.haskell.org <em>and</em> want to track it with Arch Linux’s own package manager <code>pacman</code>, you have to somehow generate a PKGBUILD from the Hackage package and feed it into <code>makepkg</code>, and then call <code>sudo pacman -U &lt;generated_package&gt;</code> on it. You can do this with <code>cblrepo</code>, but it takes a number of steps that could get very tedious, very fast:</p>
<ol type="1">
<li>Sync all the packages on Hackage with <code>cblrepo</code>, via <code>cblrepo sync</code>.</li>
<li>Initialize the <code>cblrepo.db</code> file, which is generated automatically each time you execute a <code>cblrepo add ...</code> command.</li>
<li>Add all of the standard packages that comes with installing GHC (<code>ghc</code> in Arch Linux) with <code>cblrepo add --ghc-pkg ...</code>.</li>
<li>Add all the packages installed by yourself from the [haskell-core] repository with <code>cblrepo add --distro-pkg ...</code></li>
<li>Add the <code>&lt;package_name&gt;.cabal</code> URL from the Hackage package’s page, which is in the format <code>http://hackage.haskell.org/package/&lt;package_name&gt;</code>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></li>
<li>Run <code>cblrepo pkgbuild &lt;package_name&gt;</code>.</li>
<li>Go into the generated <code>haskell-&lt;package_name_lowercased&gt;</code> directory which contains the <code>PKGBUILD</code> we are after, and run <code>makepkg -s</code>.</li>
<li>Finally run <code>sudo pacman -U &lt;package_arch_linux_format&gt;</code> on it to track it with <code>pacman</code>.</li>
</ol>
<p>The problem is that steps 3 and 4 take forever to do by hand because you have to add every single package individually, writing out the version numbers (and, it is something of a mystery unless you know where to look for the crucial information).<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Plus, you have to redo all steps 1 through 7 each time you upgrade <code>ghc</code>. So, naturally, I wrote a script (called <code>maintain_cblrepo.sh</code>) to automate things a bit.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource numberLines bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#!/usr/bin/env zsh</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># LICENSE: PUBLIC DOMAIN</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co"># Usage: ./maintain_cblrepo.sh &lt;HACKAGE_PACKAGES_FILE&gt; &lt;MODE&gt;</span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="va">usage=</span><span class="st">&quot;Usage: ./maintain_cblrepo.sh &lt;HACKAGE_PACKAGES_FILE&gt; &lt;MODE&gt;&quot;</span></a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co"># Exit immediately if any errors are found</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="ex">setopt</span> errexit</a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co"># Avoid &quot;no matches found&quot; error if a file does not exist; see</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co"># http://www.zsh.org/mla/users/2008/msg01139.html</span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="ex">setopt</span> local_options no_nomatch</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="kw">if [[</span> <span class="ot">-z</span> <span class="va">$1</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-13" title="13">	<span class="bu">echo</span> <span class="va">$usage</span></a>
<a class="sourceLine" id="cb1-14" title="14">	<span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb1-15" title="15"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="kw">if [[</span> <span class="ot">!</span> <span class="ot">-f</span> <span class="va">$1</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-17" title="17">	<span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\`</span><span class="va">$1</span><span class="st">' does not exist or is not a regular file&quot;</span></a>
<a class="sourceLine" id="cb1-18" title="18">	<span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb1-19" title="19"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="kw">if [[</span> <span class="ot">-z</span> <span class="va">$2</span><span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-21" title="21">	<span class="bu">echo</span> <span class="va">$usage</span></a>
<a class="sourceLine" id="cb1-22" title="22">	<span class="bu">exit</span> 1</a>
<a class="sourceLine" id="cb1-23" title="23"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-24" title="24"></a>
<a class="sourceLine" id="cb1-25" title="25"><span class="va">hackage_url=</span><span class="st">&quot;http://hackage.haskell.org&quot;</span></a>
<a class="sourceLine" id="cb1-26" title="26"><span class="va">hackage_packages_file=(</span><span class="op">$(&lt;</span><span class="va">$1</span><span class="op">)</span><span class="va">)</span></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="va">mode=$2</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30"><span class="kw">case</span> <span class="va">$mode</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb1-31" title="31">	<span class="al">###</span><span class="co"> Remove any old cblrepo.db file. </span><span class="al">###</span></a>
<a class="sourceLine" id="cb1-32" title="32">	<span class="kw">(</span>initdb<span class="kw">|</span>initdb-sync<span class="kw">)</span></a>
<a class="sourceLine" id="cb1-33" title="33">	<span class="fu">rm</span> -f cblrepo.db</a>
<a class="sourceLine" id="cb1-34" title="34"></a>
<a class="sourceLine" id="cb1-35" title="35">	<span class="co"># Add packages provided by GHC</span></a>
<a class="sourceLine" id="cb1-36" title="36"></a>
<a class="sourceLine" id="cb1-37" title="37">	<span class="co"># Pacman provides information about which modules are exposed by installing the</span></a>
<a class="sourceLine" id="cb1-38" title="38">	<span class="co"># 'ghc' package. We put each package into an array.</span></a>
<a class="sourceLine" id="cb1-39" title="39">	<span class="va">provided=($(</span><span class="ex">pacman</span> -Qi ghc <span class="kw">|</span> <span class="fu">grep</span> Provides <span class="kw">|</span> <span class="fu">cut</span> -d <span class="st">&quot;:&quot;</span> -f2<span class="va">))</span></a>
<a class="sourceLine" id="cb1-40" title="40"></a>
<a class="sourceLine" id="cb1-41" title="41">	<span class="kw">for</span> <span class="ex">p</span> in <span class="va">$provided</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-42" title="42">		<span class="co"># Change the syntax to be compatible with cblrepo. The `cut` command here</span></a>
<a class="sourceLine" id="cb1-43" title="43">		<span class="co"># removes the 'haskell-' prefix for each package, and `sed` here replaces</span></a>
<a class="sourceLine" id="cb1-44" title="44">		<span class="co"># each '=' sign with a ',', as per cblrepo's requirements.</span></a>
<a class="sourceLine" id="cb1-45" title="45">		<span class="va">package=$(</span><span class="bu">echo</span> <span class="va">$p</span> <span class="kw">|</span> <span class="fu">cut</span> -c9- <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/=/,/'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb1-46" title="46">		<span class="va">command=</span><span class="st">&quot;cblrepo add --ghc-pkg </span><span class="va">$package</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-47" title="47">		<span class="co"># Tell user what we are going to do.</span></a>
<a class="sourceLine" id="cb1-48" title="48">		<span class="bu">echo</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-49" title="49">		<span class="co"># Actually execute the command.</span></a>
<a class="sourceLine" id="cb1-50" title="50">		<span class="bu">eval</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-51" title="51">	<span class="kw">done</span></a>
<a class="sourceLine" id="cb1-52" title="52"></a>
<a class="sourceLine" id="cb1-53" title="53">	<span class="co"># Add packages installed by the user from [haskell-core] or some other Arch Linux repository</span></a>
<a class="sourceLine" id="cb1-54" title="54">	<span class="va">installed=($(</span><span class="ex">pacman</span> -Qq <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;^haskell-&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/^haskell-//'</span><span class="va">))</span></a>
<a class="sourceLine" id="cb1-55" title="55">	<span class="co"># Filter out those packages that were installed from Hackage using this very</span></a>
<a class="sourceLine" id="cb1-56" title="56">	<span class="co"># same script (in Arch Linux, the hackage packages, once installed, are in</span></a>
<a class="sourceLine" id="cb1-57" title="57">	<span class="co"># the format `haskell-&lt;lowercased_package_name&gt;'). This way, we avoid</span></a>
<a class="sourceLine" id="cb1-58" title="58">	<span class="co"># duplicate definitions and the packages added with --distro-pkg will really</span></a>
<a class="sourceLine" id="cb1-59" title="59">	<span class="co"># be those packages available from the distribution's official haskell</span></a>
<a class="sourceLine" id="cb1-60" title="60">	<span class="co"># repository.</span></a>
<a class="sourceLine" id="cb1-61" title="61">	<span class="va">hackage_lowercased=($hackage_packages_file</span>:l<span class="va">)</span></a>
<a class="sourceLine" id="cb1-62" title="62">	<span class="va">installed_filtered=(${installed:</span><span class="er">|</span><span class="va">hackage_lowercased})</span></a>
<a class="sourceLine" id="cb1-63" title="63"></a>
<a class="sourceLine" id="cb1-64" title="64">	<span class="kw">for</span> <span class="ex">p</span> in <span class="va">$installed_filtered</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-65" title="65">		<span class="va">version=$(</span><span class="ex">pacman</span> -Q haskell-<span class="va">$p</span> <span class="kw">|</span> <span class="fu">cut</span> -d <span class="st">&quot; &quot;</span> -f2 <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/-/,/'</span><span class="va">)</span></a>
<a class="sourceLine" id="cb1-66" title="66">		<span class="va">command=</span><span class="st">&quot;cblrepo add --distro-pkg </span><span class="va">$p</span><span class="st">,</span><span class="va">$version</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-67" title="67">		<span class="bu">echo</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-68" title="68">		<span class="bu">eval</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-69" title="69">	<span class="kw">done</span></a>
<a class="sourceLine" id="cb1-70" title="70"></a>
<a class="sourceLine" id="cb1-71" title="71">	<span class="kw">if [[</span> <span class="va">$mode</span> <span class="ot">==</span> initdb-sync<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-72" title="72">		<span class="co"># Sync cblrepo with Hackage</span></a>
<a class="sourceLine" id="cb1-73" title="73">		<span class="bu">echo</span> -n <span class="st">&quot;Syncing cblrepo with Hackage...&quot;</span></a>
<a class="sourceLine" id="cb1-74" title="74">		<span class="ex">cblrepo</span> sync</a>
<a class="sourceLine" id="cb1-75" title="75">		<span class="bu">echo</span> <span class="st">&quot;done&quot;</span></a>
<a class="sourceLine" id="cb1-76" title="76">	<span class="kw">fi</span></a>
<a class="sourceLine" id="cb1-77" title="77"></a>
<a class="sourceLine" id="cb1-78" title="78">	<span class="co"># Add packages from Hackage</span></a>
<a class="sourceLine" id="cb1-79" title="79">	<span class="kw">for</span> <span class="ex">hp</span> in <span class="va">$hackage_packages_file</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-80" title="80">		<span class="co"># Grab latest version of package</span></a>
<a class="sourceLine" id="cb1-81" title="81">		<span class="va">cabal_file=$(</span><span class="ex">curl</span> -s <span class="va">$hackage_url</span>/package/<span class="va">$hp</span> <span class="kw">|</span> <span class="fu">grep</span> -ioE <span class="st">&quot;Cabal source package[)&lt;&gt;/lia href=</span><span class="dt">\&quot;</span><span class="st">]+\/package\/.+\.cabal&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> -ioE <span class="st">&quot;\/package.+&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb1-82" title="82">		<span class="va">command=</span><span class="st">&quot;cblrepo add --cbl-url </span><span class="va">$hackage_url$cabal_file</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-83" title="83">		<span class="bu">echo</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-84" title="84">		<span class="bu">eval</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-85" title="85">	<span class="kw">done</span></a>
<a class="sourceLine" id="cb1-86" title="86"></a>
<a class="sourceLine" id="cb1-87" title="87">	<span class="co"># Link the generated cblrepo.db file into ~/.cblrepo</span></a>
<a class="sourceLine" id="cb1-88" title="88">	<span class="fu">ln</span> -sf <span class="va">$PWD</span>/cblrepo.db ~/.cblrepo/cblrepo.db</a>
<a class="sourceLine" id="cb1-89" title="89">	<span class="kw">;;</span></a>
<a class="sourceLine" id="cb1-90" title="90">	<span class="al">###</span><span class="co"> Generate PKGBUILD files for Hackage packages </span><span class="al">###</span></a>
<a class="sourceLine" id="cb1-91" title="91">	<span class="kw">(</span>pkgbuild<span class="kw">)</span></a>
<a class="sourceLine" id="cb1-92" title="92"></a>
<a class="sourceLine" id="cb1-93" title="93">	<span class="co"># Remove any old packages.</span></a>
<a class="sourceLine" id="cb1-94" title="94">	<span class="bu">echo</span> <span class="st">&quot;Deleting old PKGBUILD directories...&quot;</span></a>
<a class="sourceLine" id="cb1-95" title="95">	<span class="fu">rm</span> -rfv haskell-*</a>
<a class="sourceLine" id="cb1-96" title="96"></a>
<a class="sourceLine" id="cb1-97" title="97">	<span class="va">i=</span>1</a>
<a class="sourceLine" id="cb1-98" title="98">	<span class="kw">for</span> <span class="ex">hp</span> in <span class="va">${hackage_packages_file}</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-99" title="99">		<span class="va">command=</span><span class="st">&quot;cblrepo pkgbuild --patchdir patch </span><span class="va">$hp</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-100" title="100">		<span class="bu">echo</span> <span class="st">&quot;(</span><span class="va">$i</span><span class="st">/</span><span class="va">${#hackage_packages_file}</span><span class="st">) </span><span class="va">$command</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-101" title="101">		<span class="bu">eval</span> <span class="va">$command</span></a>
<a class="sourceLine" id="cb1-102" title="102">		<span class="kw">((</span> i+=1 <span class="kw">))</span></a>
<a class="sourceLine" id="cb1-103" title="103">	<span class="kw">done</span></a>
<a class="sourceLine" id="cb1-104" title="104">	<span class="kw">;;</span></a>
<a class="sourceLine" id="cb1-105" title="105">	<span class="al">###</span><span class="co"> Create Arch Linux packages for the Hackage packages </span><span class="al">###</span></a>
<a class="sourceLine" id="cb1-106" title="106">	<span class="kw">(</span>makepkg<span class="kw">)</span></a>
<a class="sourceLine" id="cb1-107" title="107">	<span class="kw">for</span> <span class="ex">pdir</span> in haskell-*<span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb1-108" title="108">		<span class="bu">cd</span> <span class="va">$pdir</span></a>
<a class="sourceLine" id="cb1-109" title="109">		<span class="bu">echo</span> <span class="va">$(</span><span class="fu">basename</span> <span class="va">$PWD)</span></a>
<a class="sourceLine" id="cb1-110" title="110">		<span class="ex">makepkg</span> -sf</a>
<a class="sourceLine" id="cb1-111" title="111">		<span class="fu">sudo</span> pacman -U <span class="va">$(</span><span class="fu">basename</span> <span class="va">$PWD)</span>-*.pkg.tar.xz</a>
<a class="sourceLine" id="cb1-112" title="112">		<span class="bu">cd</span> ..</a>
<a class="sourceLine" id="cb1-113" title="113">		<span class="bu">echo</span></a>
<a class="sourceLine" id="cb1-114" title="114">		<span class="bu">echo</span> <span class="st">&quot;  Finished making/installing package for </span><span class="va">$pdir</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-115" title="115">		<span class="bu">echo</span></a>
<a class="sourceLine" id="cb1-116" title="116">	<span class="kw">done</span></a>
<a class="sourceLine" id="cb1-117" title="117">	<span class="kw">;;</span></a>
<a class="sourceLine" id="cb1-118" title="118">	*<span class="kw">)</span></a>
<a class="sourceLine" id="cb1-119" title="119">	<span class="bu">echo</span> <span class="st">&quot;Unrecognized &lt;MODE&gt;; valid ones are: initdb initdb-sync pkgbuild makepkg&quot;</span></a>
<a class="sourceLine" id="cb1-120" title="120">	<span class="kw">;;</span></a>
<a class="sourceLine" id="cb1-121" title="121"><span class="kw">esac</span></a></code></pre></div>
<p>A simple <code>HACKAGE_PACKAGES_FILE</code> (perhaps named <code>hackage_pkgs</code>) might look something like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource numberLines"><code class="sourceCode"><a class="sourceLine" id="cb2-1" title="1">bindings-DSL</a>
<a class="sourceLine" id="cb2-2" title="2">bindings-GLFW</a>
<a class="sourceLine" id="cb2-3" title="3">GLFW-b</a>
<a class="sourceLine" id="cb2-4" title="4">rosezipper</a></code></pre></div>
<p>Here is sample output from the command <code>./maintain_cblrepo.sh hackage_pkgs initdb</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource numberLines"><code class="sourceCode"><a class="sourceLine" id="cb3-1" title="1">cblrepo add --ghc-pkg array,0.4.0.1</a>
<a class="sourceLine" id="cb3-2" title="2">cblrepo add --ghc-pkg base,4.6.0.1</a>
<a class="sourceLine" id="cb3-3" title="3">cblrepo add --ghc-pkg binary,0.5.1.1</a>
<a class="sourceLine" id="cb3-4" title="4">cblrepo add --ghc-pkg bin-package-db,0.0.0.0</a>
<a class="sourceLine" id="cb3-5" title="5">cblrepo add --ghc-pkg bytestring,0.10.0.2</a>
<a class="sourceLine" id="cb3-6" title="6">cblrepo add --ghc-pkg containers,0.5.0.0</a>
<a class="sourceLine" id="cb3-7" title="7">cblrepo add --ghc-pkg deepseq,1.3.0.1</a>
<a class="sourceLine" id="cb3-8" title="8">cblrepo add --ghc-pkg directory,1.2.0.1</a>
<a class="sourceLine" id="cb3-9" title="9">cblrepo add --ghc-pkg filepath,1.3.0.1</a>
<a class="sourceLine" id="cb3-10" title="10">cblrepo add --ghc-pkg ghc-prim,0.3.0.0</a>
<a class="sourceLine" id="cb3-11" title="11">cblrepo add --ghc-pkg haskell2010,1.1.1.0</a>
<a class="sourceLine" id="cb3-12" title="12">cblrepo add --ghc-pkg haskell98,2.0.0.2</a>
<a class="sourceLine" id="cb3-13" title="13">cblrepo add --ghc-pkg hoopl,3.9.0.0</a>
<a class="sourceLine" id="cb3-14" title="14">cblrepo add --ghc-pkg hpc,0.6.0.0</a>
<a class="sourceLine" id="cb3-15" title="15">cblrepo add --ghc-pkg integer-gmp,0.5.0.0</a>
<a class="sourceLine" id="cb3-16" title="16">cblrepo add --ghc-pkg old-locale,1.0.0.5</a>
<a class="sourceLine" id="cb3-17" title="17">cblrepo add --ghc-pkg old-time,1.1.0.1</a>
<a class="sourceLine" id="cb3-18" title="18">cblrepo add --ghc-pkg pretty,1.1.1.0</a>
<a class="sourceLine" id="cb3-19" title="19">cblrepo add --ghc-pkg process,1.1.0.2</a>
<a class="sourceLine" id="cb3-20" title="20">cblrepo add --ghc-pkg template-haskell,2.8.0.0</a>
<a class="sourceLine" id="cb3-21" title="21">cblrepo add --ghc-pkg time,1.4.0.1</a>
<a class="sourceLine" id="cb3-22" title="22">cblrepo add --ghc-pkg unix,2.6.0.1</a>
<a class="sourceLine" id="cb3-23" title="23">cblrepo add --ghc-pkg cabal,1.16.0</a>
<a class="sourceLine" id="cb3-24" title="24">cblrepo add --distro-pkg aeson,0.6.2.1,5</a>
<a class="sourceLine" id="cb3-25" title="25">cblrepo add --distro-pkg ansi-terminal,0.6.1,1</a>
<a class="sourceLine" id="cb3-26" title="26">cblrepo add --distro-pkg ansi-wl-pprint,0.6.7.1,1</a>
<a class="sourceLine" id="cb3-27" title="27">cblrepo add --distro-pkg attoparsec,0.10.4.0,4</a>
<a class="sourceLine" id="cb3-28" title="28">cblrepo add --distro-pkg base-unicode-symbols,0.2.2.4,27</a>
<a class="sourceLine" id="cb3-29" title="29">cblrepo add --distro-pkg base64-bytestring,1.0.0.1,2</a>
<a class="sourceLine" id="cb3-30" title="30">cblrepo add --distro-pkg binary,0.7.1.0,1</a>
<a class="sourceLine" id="cb3-31" title="31">cblrepo add --distro-pkg blaze-builder,0.3.3.2,1</a>
<a class="sourceLine" id="cb3-32" title="32">cblrepo add --distro-pkg blaze-html,0.6.1.2,2</a>
<a class="sourceLine" id="cb3-33" title="33">cblrepo add --distro-pkg blaze-markup,0.5.1.6,2</a>
<a class="sourceLine" id="cb3-34" title="34">cblrepo add --distro-pkg byteable,0.1.1,1</a>
<a class="sourceLine" id="cb3-35" title="35">cblrepo add --distro-pkg cairo,0.12.5.0,1</a>
<a class="sourceLine" id="cb3-36" title="36">cblrepo add --distro-pkg case-insensitive,1.1.0.2,1</a>
<a class="sourceLine" id="cb3-37" title="37">cblrepo add --distro-pkg cereal,0.4.0.1,1</a>
<a class="sourceLine" id="cb3-38" title="38">cblrepo add --distro-pkg cmdargs,0.10.7,1</a>
<a class="sourceLine" id="cb3-39" title="39">cblrepo add --distro-pkg colour,2.3.3,3</a>
<a class="sourceLine" id="cb3-40" title="40">cblrepo add --distro-pkg conduit,1.0.9.3,3</a>
<a class="sourceLine" id="cb3-41" title="41">cblrepo add --distro-pkg cpphs,1.17.1,2</a>
<a class="sourceLine" id="cb3-42" title="42">cblrepo add --distro-pkg cryptohash,0.11.1,1</a>
<a class="sourceLine" id="cb3-43" title="43">cblrepo add --distro-pkg data-default,0.5.3,3</a>
<a class="sourceLine" id="cb3-44" title="44">cblrepo add --distro-pkg data-default-class,0.0.1,2</a>
<a class="sourceLine" id="cb3-45" title="45">cblrepo add --distro-pkg data-default-instances-base,0.0.1,2</a>
<a class="sourceLine" id="cb3-46" title="46">cblrepo add --distro-pkg data-default-instances-containers,0.0.1,2</a>
<a class="sourceLine" id="cb3-47" title="47">cblrepo add --distro-pkg data-default-instances-dlist,0.0.1,3</a>
<a class="sourceLine" id="cb3-48" title="48">cblrepo add --distro-pkg data-default-instances-old-locale,0.0.1,2</a>
<a class="sourceLine" id="cb3-49" title="49">cblrepo add --distro-pkg digest,0.0.1.2,3</a>
<a class="sourceLine" id="cb3-50" title="50">cblrepo add --distro-pkg dlist,0.6.0.1,1</a>
<a class="sourceLine" id="cb3-51" title="51">cblrepo add --distro-pkg entropy,0.2.2.4,1</a>
<a class="sourceLine" id="cb3-52" title="52">cblrepo add --distro-pkg extensible-exceptions,0.1.1.4,27</a>
<a class="sourceLine" id="cb3-53" title="53">cblrepo add --distro-pkg fgl,5.4.2.4,27</a>
<a class="sourceLine" id="cb3-54" title="54">cblrepo add --distro-pkg glib,0.12.5.0,1</a>
<a class="sourceLine" id="cb3-55" title="55">cblrepo add --distro-pkg gluraw,1.4.0.0,2</a>
<a class="sourceLine" id="cb3-56" title="56">cblrepo add --distro-pkg glut,2.5.0.2,1</a>
<a class="sourceLine" id="cb3-57" title="57">cblrepo add --distro-pkg graphviz,2999.16.0.0,8</a>
<a class="sourceLine" id="cb3-58" title="58">cblrepo add --distro-pkg gtk,0.12.5.0,1</a>
<a class="sourceLine" id="cb3-59" title="59">cblrepo add --distro-pkg hashable,1.2.1.0,1</a>
<a class="sourceLine" id="cb3-60" title="60">cblrepo add --distro-pkg haskell-src-exts,1.14.0,1</a>
<a class="sourceLine" id="cb3-61" title="61">cblrepo add --distro-pkg highlighting-kate,0.5.5.1,3</a>
<a class="sourceLine" id="cb3-62" title="62">cblrepo add --distro-pkg hinotify,0.3.6,1</a>
<a class="sourceLine" id="cb3-63" title="63">cblrepo add --distro-pkg hlint,1.8.55,1</a>
<a class="sourceLine" id="cb3-64" title="64">cblrepo add --distro-pkg hostname,1.0,27</a>
<a class="sourceLine" id="cb3-65" title="65">cblrepo add --distro-pkg hs-bibutils,5.0,3</a>
<a class="sourceLine" id="cb3-66" title="66">cblrepo add --distro-pkg hscolour,1.20.3,27</a>
<a class="sourceLine" id="cb3-67" title="67">cblrepo add --distro-pkg hslua,0.3.10,1</a>
<a class="sourceLine" id="cb3-68" title="68">cblrepo add --distro-pkg http,4000.2.10,2</a>
<a class="sourceLine" id="cb3-69" title="69">cblrepo add --distro-pkg http-types,0.8.3,2</a>
<a class="sourceLine" id="cb3-70" title="70">cblrepo add --distro-pkg hunit,1.2.5.2,2</a>
<a class="sourceLine" id="cb3-71" title="71">cblrepo add --distro-pkg json,0.7,9</a>
<a class="sourceLine" id="cb3-72" title="72">cblrepo add --distro-pkg lifted-base,0.2.1.1,1</a>
<a class="sourceLine" id="cb3-73" title="73">cblrepo add --distro-pkg mmorph,1.0.1,1</a>
<a class="sourceLine" id="cb3-74" title="74">cblrepo add --distro-pkg monad-control,0.3.2.2,1</a>
<a class="sourceLine" id="cb3-75" title="75">cblrepo add --distro-pkg monadcatchio-mtl,0.3.1.0,1</a>
<a class="sourceLine" id="cb3-76" title="76">cblrepo add --distro-pkg monadcatchio-transformers,0.3.1.0,1</a>
<a class="sourceLine" id="cb3-77" title="77">cblrepo add --distro-pkg monads-tf,0.1.0.1,27</a>
<a class="sourceLine" id="cb3-78" title="78">cblrepo add --distro-pkg mtl,2.1.2,27</a>
<a class="sourceLine" id="cb3-79" title="79">cblrepo add --distro-pkg mwc-random,0.13.1.0,1</a>
<a class="sourceLine" id="cb3-80" title="80">cblrepo add --distro-pkg nats,0.1.2,1</a>
<a class="sourceLine" id="cb3-81" title="81">cblrepo add --distro-pkg network,2.4.2.2,1</a>
<a class="sourceLine" id="cb3-82" title="82">cblrepo add --distro-pkg opengl,2.9.1.0,1</a>
<a class="sourceLine" id="cb3-83" title="83">cblrepo add --distro-pkg openglraw,1.4.0.0,2</a>
<a class="sourceLine" id="cb3-84" title="84">cblrepo add --distro-pkg pandoc,1.12.2.1,4</a>
<a class="sourceLine" id="cb3-85" title="85">cblrepo add --distro-pkg pandoc-types,1.12.3,5</a>
<a class="sourceLine" id="cb3-86" title="86">cblrepo add --distro-pkg pango,0.12.5.0,1</a>
<a class="sourceLine" id="cb3-87" title="87">cblrepo add --distro-pkg parsec,3.1.4,1</a>
<a class="sourceLine" id="cb3-88" title="88">cblrepo add --distro-pkg pcre-light,0.4,27</a>
<a class="sourceLine" id="cb3-89" title="89">cblrepo add --distro-pkg polyparse,1.9,1</a>
<a class="sourceLine" id="cb3-90" title="90">cblrepo add --distro-pkg pqueue,1.2.1,1</a>
<a class="sourceLine" id="cb3-91" title="91">cblrepo add --distro-pkg primitive,0.5.1.0,1</a>
<a class="sourceLine" id="cb3-92" title="92">cblrepo add --distro-pkg quickcheck,2.6,2</a>
<a class="sourceLine" id="cb3-93" title="93">cblrepo add --distro-pkg random,1.0.1.1,27</a>
<a class="sourceLine" id="cb3-94" title="94">cblrepo add --distro-pkg regex-base,0.93.2,27</a>
<a class="sourceLine" id="cb3-95" title="95">cblrepo add --distro-pkg regex-compat,0.95.1,27</a>
<a class="sourceLine" id="cb3-96" title="96">cblrepo add --distro-pkg regex-pcre,0.94.4,1</a>
<a class="sourceLine" id="cb3-97" title="97">cblrepo add --distro-pkg regex-posix,0.95.2,27</a>
<a class="sourceLine" id="cb3-98" title="98">cblrepo add --distro-pkg regex-tdfa,1.1.8,30</a>
<a class="sourceLine" id="cb3-99" title="99">cblrepo add --distro-pkg resourcet,0.4.10,2</a>
<a class="sourceLine" id="cb3-100" title="100">cblrepo add --distro-pkg safe,0.3.3,3</a>
<a class="sourceLine" id="cb3-101" title="101">cblrepo add --distro-pkg sdl,0.6.5,1</a>
<a class="sourceLine" id="cb3-102" title="102">cblrepo add --distro-pkg sdl-image,0.6.1,28</a>
<a class="sourceLine" id="cb3-103" title="103">cblrepo add --distro-pkg sdl-ttf,0.6.2,3</a>
<a class="sourceLine" id="cb3-104" title="104">cblrepo add --distro-pkg semigroups,0.12.1,1</a>
<a class="sourceLine" id="cb3-105" title="105">cblrepo add --distro-pkg sha,1.6.3,1</a>
<a class="sourceLine" id="cb3-106" title="106">cblrepo add --distro-pkg split,0.2.2,2</a>
<a class="sourceLine" id="cb3-107" title="107">cblrepo add --distro-pkg stm,2.4.2,3</a>
<a class="sourceLine" id="cb3-108" title="108">cblrepo add --distro-pkg syb,0.4.1,2</a>
<a class="sourceLine" id="cb3-109" title="109">cblrepo add --distro-pkg system-fileio,0.3.11,6</a>
<a class="sourceLine" id="cb3-110" title="110">cblrepo add --distro-pkg system-filepath,0.4.8,1</a>
<a class="sourceLine" id="cb3-111" title="111">cblrepo add --distro-pkg tagged,0.7,1</a>
<a class="sourceLine" id="cb3-112" title="112">cblrepo add --distro-pkg tagsoup,0.13,1</a>
<a class="sourceLine" id="cb3-113" title="113">cblrepo add --distro-pkg temporary,1.1.2.4,3</a>
<a class="sourceLine" id="cb3-114" title="114">cblrepo add --distro-pkg test-framework,0.8.0.3,3</a>
<a class="sourceLine" id="cb3-115" title="115">cblrepo add --distro-pkg test-framework-quickcheck2,0.3.0.2,3</a>
<a class="sourceLine" id="cb3-116" title="116">cblrepo add --distro-pkg texmath,0.6.5.2,3</a>
<a class="sourceLine" id="cb3-117" title="117">cblrepo add --distro-pkg text,0.11.3.1,1</a>
<a class="sourceLine" id="cb3-118" title="118">cblrepo add --distro-pkg transformers,0.3.0.0,27</a>
<a class="sourceLine" id="cb3-119" title="119">cblrepo add --distro-pkg transformers-base,0.4.1,27</a>
<a class="sourceLine" id="cb3-120" title="120">cblrepo add --distro-pkg uniplate,1.6.12,1</a>
<a class="sourceLine" id="cb3-121" title="121">cblrepo add --distro-pkg unix-compat,0.4.1.1,2</a>
<a class="sourceLine" id="cb3-122" title="122">cblrepo add --distro-pkg unordered-containers,0.2.3.3,1</a>
<a class="sourceLine" id="cb3-123" title="123">cblrepo add --distro-pkg utf8-string,0.3.7,27</a>
<a class="sourceLine" id="cb3-124" title="124">cblrepo add --distro-pkg utility-ht,0.0.9,1</a>
<a class="sourceLine" id="cb3-125" title="125">cblrepo add --distro-pkg vector,0.10.9.1,1</a>
<a class="sourceLine" id="cb3-126" title="126">cblrepo add --distro-pkg void,0.6.1,6</a>
<a class="sourceLine" id="cb3-127" title="127">cblrepo add --distro-pkg wl-pprint-text,1.1.0.1,1</a>
<a class="sourceLine" id="cb3-128" title="128">cblrepo add --distro-pkg x11,1.6.1.1,5</a>
<a class="sourceLine" id="cb3-129" title="129">cblrepo add --distro-pkg x11-xft,0.3.1,31</a>
<a class="sourceLine" id="cb3-130" title="130">cblrepo add --distro-pkg xml,1.3.13,4</a>
<a class="sourceLine" id="cb3-131" title="131">cblrepo add --distro-pkg xmonad,0.11,7</a>
<a class="sourceLine" id="cb3-132" title="132">cblrepo add --distro-pkg xmonad-contrib,0.11.2,2</a>
<a class="sourceLine" id="cb3-133" title="133">cblrepo add --distro-pkg yaml,0.8.5.2,4</a>
<a class="sourceLine" id="cb3-134" title="134">cblrepo add --distro-pkg zip-archive,0.1.4,1</a>
<a class="sourceLine" id="cb3-135" title="135">cblrepo add --distro-pkg zlib,0.5.4.1,2</a>
<a class="sourceLine" id="cb3-136" title="136">cblrepo add --cbl-url http://hackage.haskell.org/package/bindings-DSL-1.0.20/bindings-DSL.cabal</a>
<a class="sourceLine" id="cb3-137" title="137">cblrepo add --cbl-url http://hackage.haskell.org/package/bindings-GLFW-3.0.3.2/bindings-GLFW.cabal</a>
<a class="sourceLine" id="cb3-138" title="138">cblrepo add --cbl-url http://hackage.haskell.org/package/GLFW-b-1.4.6/GLFW-b.cabal</a>
<a class="sourceLine" id="cb3-139" title="139">cblrepo add --cbl-url http://hackage.haskell.org/package/rosezipper-0.2/rosezipper.cabal</a></code></pre></div>
<p>This is infinitely faster than adding each package by hand. Feel free to copy/paste/modify/redistribute the code in <code>maintain_cblrepo.sh</code> to suit your needs.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>I use a <a href="http://mycroftproject.com/search-engines.html?name=hackage">Hackage-tailored search engine for Firefox</a> to make package searching on Hackage easier.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>The command for finding out which packages are provided by GHC is <code>pacman -Qi ghc</code>, and you have to look for the <code>Provides</code> field. As for the packages from [haskell-core], you have to do some manual grepping for packages that start with <code>haskell-</code> from the command <code>pacman -Q</code>.<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</section>

		</div>
		<div id="footer">
			<p>Copyright (C) 2013-2019 Linus Arver. All rights reserved.</p>
			<a href="https://github.com/listx/listx_blog">Site</a>
			<a href="https://github.com/listx/listx.github.io">generated</a>
			with
			<a href="https://jaspervdj.be/hakyll">Hakyll</a>
			and
			<a href="http://sebastiaanvisser.github.com/clay">Clay</a>.
			<br>
			<a href="../atom.xml">Atom feed</a>
		</div>
	</body>
</html>
